- title "Advanced Search"

%h2 Advanced Document Search

%p
  :markdown
    This page lets you perform an advanced search of the evoText database.  You may choose either to utilize our guided search form, or to construct a query directly in [Solr's query syntax](http://wiki.apache.org/solr/SolrQuerySyntax), which is itself a superset of [Lucene query syntax](http://lucene.apache.org/java/2_9_1/queryparsersyntax.html).  These custom searches are extremely powerful.

%div.verticalpad

%h3 Guided Advanced Search

= form_tag documents_path, { :method => "get" } do
  = hidden_field_tag :precise, true
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :authors do
      %span Authors:
      = help_button :'help.search.authors'
    = text_field_tag :authors
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :title do
      %span Title:
      = help_button :'help.search.title'
    = text_field_tag :title
  %div{ 'data-role' => 'fieldcontain' }
    = field_set_tag 'Title search type:', 'data-role' => 'controlgroup', 'data-type' => 'horizontal' do
      = radio_button_tag(:title_type, "exact", true, :id => :title_type_exact)
      = label_tag(:title_type_exact, "Exact")
      = radio_button_tag(:title_type, "fuzzy", false, :id => :title_type_fuzzy)
      = label_tag(:title_type_fuzzy, "Fuzzy")
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :journal do
      %span Journal:
      = help_button :'help.search.journal'
    = text_field_tag(:journal)
  %div{ 'data-role' => 'fieldcontain' }
    = field_set_tag 'Journal search type:', 'data-role' => 'controlgroup', 'data-type' => 'horizontal' do
      = radio_button_tag(:journal_type, "exact", true, :id => :journal_type_exact)
      = label_tag(:journal_type_exact, "Exact")
      = radio_button_tag(:journal_type, "fuzzy", false, :id => :journal_type_fuzzy)
      = label_tag(:journal_type_fuzzy, "Fuzzy")
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :year_start do
      %span Published after:
      = help_button :'help.search.year_start'
    = text_field_tag(:year_start)
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :year_end do
      %span Published before:
      = help_button :'help.search.year_end'
    = text_field_tag(:year_end)
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :volume do
      %span Volume:
      = help_button :'help.search.volume'
    = text_field_tag(:volume)
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :number do
      %span Issue number:
      = help_button :'help.search.issue'
    = text_field_tag(:number)
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :pages do
      %span Pages:
      = help_button :'help.search.pages'
    = text_field_tag(:pages)
  %div{ 'data-role' => 'fieldcontain' }
    = label_tag :fulltext do
      %span Full article text:
      = help_button :'help.search.fulltext'
    = text_field_tag(:fulltext)
  %div{ 'data-role' => 'fieldcontain' }
    = field_set_tag 'Full text search type:', 'data-role' => 'controlgroup', 'data-type' => 'horizontal' do
      = radio_button_tag(:fulltext_type, "exact", true)
      = label_tag(:fulltext_type_exact, 'Exact')
      = radio_button_tag(:fulltext_type, "fuzzy", false)
      = label_tag(:fulltext_type_fuzzy, 'Fuzzy')
  = submit_tag "Advanced Search"

%div.verticalpad

%h3 Solr Query Search

.solrform
  = form_tag(documents_path, :method => "get") do
    = hidden_field_tag(:precise, true)
    = label_tag :q do
      %span Solr query string:
      = help_button :'help.search.solr_query_markdown'
    = text_area_tag(:q, nil, { :escape => false })
    = submit_tag "Submit Solr Query"

