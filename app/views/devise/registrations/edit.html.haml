- content_for :breadcrumbs do
  %li.breadcrumb-item= link_to t('breadcrumbs.root'), root_path
  %li.breadcrumb-item.active= t('breadcrumbs.users_registrations_edit')

%h1= t('.header')
%h4.text-muted= t('.subheader')

.row
  .col-6
    = form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, novalidate: true, class: 'needs-validation' }) do |f|
      .form-group
        = f.label :name
        = f.text_field :name, class: 'form-control', required: true, autofocus: true
        .invalid-feedback= validation_errors_for(resource, :name, true)
      .form-group
        = f.label :email
        = f.email_field :email, class: 'form-control', required: true
        .invalid-feedback= validation_errors_for(resource, :email, true)
      .form-group
        = f.label :current_password
        = f.password_field :current_password, class: 'form-control', required: true
        .invalid-feedback= validation_errors_for(resource, :current_password, true, 'devise.registrations.edit.password_blank')

      .card.mb-3
        .card-body
          %h5.card-title= t('.change_password')

          .form-group
            = f.label :password
            = f.password_field :password, class: 'form-control', autocomplete: 'off', placeholder: t('.password_placeholder')
          .form-group
            = f.label :password_confirmation
            = f.password_field :password_confirmation, class: 'form-control', autocomplete: 'off', placeholder: t('.password_placeholder')

      .card.mb-3
        .card-body
          %h5.card-title= t('.settings')

          .form-group
            = f.label :language
            = f.select :language, options_for_select(I18n.available_locales.translated, resource.language), {}, class: 'form-control'
          .form-group
            = f.label :timezone
            = f.time_zone_select :timezone, nil, { default: resource.timezone }, class: 'form-control'
          .form-group
            = f.label :csl_style_id
            = f.collection_select :csl_style_id, Users::CslStyle.all, :to_param, :name, { selected: resource.csl_style_id, include_blank: true }, class: 'form-control'

      = link_to t('.cancel'), registration_path(resource_name), data: { confirm: t('.cancel_confirm') }, method: :delete, class: 'btn btn-danger'
      .float-right
        = f.submit t('.submit'), class: 'btn btn-primary'

.row
  .col-12
    %hr

    %h2= t('.library_links_header')
    %h5.text-muted= t('.library_links_subheader')

    %div#library-list{ data: { fetch_url: libraries_path } }= render template: 'users/libraries/index', layout: false
