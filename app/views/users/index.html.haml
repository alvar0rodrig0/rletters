%ul{ 'data-role' => 'listview', 'data-theme' => 'd', 'data-divider-theme' => 'b' }
  %li{ 'data-role' => 'list-divider' } Your user account
  %li= link_to "You are logged in as #{session[:user].name} (#{session[:user].email})", root_path
  %li= link_to 'Not you? Log in as a different user.', :controller => 'users', :action => 'logout', :rel => 'external'

  %li{ 'data-role' => 'list-divider' } User options

%div.verticalpad

= form_for(session[:user], :url => users_update_path) do |f|
  %ul{ 'data-role' => 'listview', 'data-theme' => 'd', 'data-divider-theme' => 'b' }  
    - if session[:user].errors.any?
      %li{ 'data-theme' => 'e' } #{pluralize(session[:user].errors.count, "error")} prohibited these options from being saved:
      - session[:user].errors.full_messages.each do |msg|
        %li{ 'data-theme' => 'e' }= msg

    %li
      %div{ 'data-role' => 'fieldcontain' }
        = f.label :email
        = f.text_field :email
      %div{ 'data-role' => 'fieldcontain' }
        = f.label :name
        = f.text_field :name
      %div{ 'data-role' => 'fieldcontain' }
        = f.label :per_page, 'Number of search results per page:'
        = f.text_field :per_page
      
    %li= f.submit
