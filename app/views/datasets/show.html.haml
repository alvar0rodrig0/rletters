- content_for :javascript do
  = javascript_include_tag 'datasets_show'

%ul{ data: { role: 'listview', theme: 'd', divider_theme: 'b', split_icon: 'delete', split_theme: 'a' } }
  %li{ data: { role: 'list-divider' } }= t('.head')
  %li
    %h3= @dataset.name
    %p= t('.num_entries', count: @dataset.entries.size)
    %p= t('.created_at', date: @dataset.created_at.to_formatted_s(:long))

%div.verticalpad

%div.dataset_task_list{ data: { fetch_url: task_list_dataset_path(@dataset) } }
  %ul{ data: { role: 'listview', theme: 'd' } }
    %li= t('.loading_tasks')

%div.verticalpad

%ul{ data: { role: 'listview', theme: 'd', divider_theme: 'b', split_icon: 'delete', split_theme: 'a' } }

  -# Show the markup for starting all the various background jobs
  %li{ data: { role: 'list-divider' } }= t('.new_task')
  - Jobs::Analysis::Base.job_list.each do |klass|
    = render_job_partial(klass, 'start')

  %li= link_to t('.delete'), destroy_dataset_path(@dataset), method: :delete, data: { confirm: 'Are you sure?' }
